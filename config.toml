# PolyRustArb Bot Configuration
# All values can be overridden via environment variables with POLY_ prefix
# Example: POLY_MODE=real overrides [general].mode

[general]
# Operating mode: "test" (simulation) or "real" (live trading)
mode = "test"

# Polygon RPC URL (use Alchemy/QuickNode for lower latency in production)
rpc_url = "https://polygon-rpc.com"

# Polymarket API endpoints
clob_api_url = "https://clob.polymarket.com"
gamma_api_url = "https://gamma-api.polymarket.com"

# WebSocket endpoints
clob_ws_url = "wss://ws-subscriptions-clob.polymarket.com/ws/market"

[wallet]
# Private key loaded from POLY_PRIVATE_KEY env var (never store in config!)
# chain_id for Polygon mainnet
chain_id = 137

[trading]
# Market IDs to monitor (15-min BTC/ETH/SOL Up/Down markets)
# NOTE: The bot uses DYNAMIC DISCOVERY from Gamma API based on '15-min' pattern.
# The list below is IGNORED/DEPRECATED but kept for reference structure.
market_slugs = [] # Auto-filled by bot logic

# Shares per trade (configurable: $1 = ~2 shares at $0.50, $100 = ~200 shares)
# $5 trade = 10 shares @ $0.50 price
per_trade_shares = 10.0

# Minimum value to trigger trade (if Yes_price + No_price < this)
# 0.95 = 5% edge (ketat, jarang trigger)
# 0.98 = 2% edge (lebih sering trigger)
# 0.99 = 1% edge (sering trigger, profit kecil per trade)
# ⚠️ TESTING: Set to 1.01 to force trades. REVERT TO 0.99 FOR REAL TRADING!
min_profit_threshold = 1.01

# Dump trigger: % price drop to initiate Leg 1 buy
dump_trigger_pct = 0.15

# Spot move trigger: % change in Binance spot price for latency arbitrage
spot_move_trigger_pct = 0.5

# Entry window: only trade within first N minutes of round
# Set to 14 to allow trading almost entire round (disable restriction)
entry_window_min = 14

# Max timeout for completing hedge (Leg 2) in seconds
max_legs_timeout_sec = 420

# Maximum daily risk as % of total capital
max_daily_risk_pct = 20.0

# Order book depth to consider for pricing
orderbook_depth = 5

# Slippage tolerance for limit orders (basis points)
slippage_bps = 50

# Retry attempts for failed orders
max_order_retries = 3

# Minimum edge required to place trade (in cents)
# Set to 0 to allow any positive edge
min_edge_cents = 0

[binance_integration]
# Enable Binance price streaming for latency arbitrage
enabled = true

# Symbols to stream (lowercase, no separators)
symbols = ["btcusdt", "ethusdt", "solusdt"]

# Window for detecting price moves (seconds)
move_window_sec = 5

# Binance WebSocket URL (public, no API key needed)
ws_url = "wss://stream.binance.com:9443"

# Reconnect settings
reconnect_delay_ms = 1000
max_reconnect_attempts = 10

[risk_management]
# Maximum position size per market (in shares)
# With $318 capital, max ~60 shares per market ($30 exposure)
max_position_per_market = 60.0

# Maximum total exposure across all markets
# ~50% of capital = $159 max across all markets
max_total_exposure = 320.0

# Stop loss threshold (% of position value)
stop_loss_pct = 10.0

# Cool-down period after loss (seconds)
loss_cooldown_sec = 60

# Maximum consecutive losses before pause
max_consecutive_losses = 3

[logging]
# Log level: trace, debug, info, warn, error
log_level = "info"

# PNL log file path
pnl_file = "pnl.log"

# Trade log file path
trade_file = "trades.log"

# Enable JSON structured logging
json_logging = false

# Log rotation: max file size in MB
max_log_size_mb = 100

[maker_rebates]
# Enable maker rebates optimization (Jan 2026 program)
# Earns rebates from taker fees when your limit orders are filled
enabled = true

# Minimum estimated rebate % to prioritize entry
# If expected rebate > this threshold, increases trade priority
rebate_estimate_threshold = 0.01

# Track and log daily rebate estimates
track_daily_rebates = true

# Rebates log file
rebates_file = "rebates.log"

# Market making mode (optional, low-volatility windows)
# Posts bid/ask around midpoint to earn rebates
# Only activates when hedging edge is low
enable_market_making = false

# Spread for market making (basis points from midpoint)
market_making_spread_bps = 100

# Maximum position for market making (shares per side)
market_making_max_position = 50.0

# Quote refresh interval (milliseconds)
quote_refresh_ms = 5000
